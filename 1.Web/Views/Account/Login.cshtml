@model Web.Models.View.Login.LoginViewModel
@{
    ViewData["Title"] = "登入頁面";
}
<div class="row">
    <div class="col-xl-4 col-md-2"></div>
    <div class="col-xl-4 col-md-8 col-xs-12">
        <div class="wrapper">
            <div class="block-center mt-4 wd-xl">
                <!-- START card-->
                <div class="card card-flat">
                    <div class="card-header text-center bg-dark">
                        <a href="#">
                            <img class="block-center rounded" src="img/logo.png" alt="Image">
                        </a>
                    </div>
                    <div class="card-body">
                        <p class="text-center py-2">登入後繼續</p>
                        <form method="post" action ="/Account/Login" class="mb-3" novalidate>
                            <div class="form-group">
                                <div class="input-group with-focus">
                                    @Html.TextBoxFor(x => x.Account, new { @class = "form-control border-right-0", @placeholder = "帳號" })
                                    <div class="input-group-append">
                                        <span class="input-group-text text-muted bg-transparent border-left-0">
                                            <em class="fa fa-user"></em>
                                        </span>
                                    </div>
                                </div>
                                <span asp-validation-for="Account" class="form-text text-danger"></span>
                            </div>
                            <div class="form-group">
                                <div class="input-group with-focus">
                                    @Html.PasswordFor(x => x.Password, new { @class = "form-control border-right-0", @placeholder = "密碼" })
                                    <div class="input-group-append">
                                        <span class="input-group-text text-muted bg-transparent border-left-0">
                                            <em class="fa fa-lock"></em>
                                        </span>
                                    </div>
                                </div>
                                <span asp-validation-for="Password" class="form-text text-danger"></span>
                            </div>

                            <div class="clearfix">
                                <div class="checkbox c-checkbox float-left mt-0">
                                    <label>
                                        @Html.CheckBoxFor(x => x.IsRemembered)
                                        <span class="fa fa-check"></span> 記住我
                                    </label>
                                </div>
                                <div class="float-right">
                                    <a class="text-muted" asp-action="ForgetPassword" asp-controller="Login">忘記密碼?</a>
                                </div>
                            </div>
                            <button id="btnSubmit" class="btn btn-block btn-primary mt-3" type="button" onclick="submitLoginForm()">登入</button>
                        </form>
                        <a class="btn btn-block btn-secondary" href="/register">馬上註冊</a>
                    </div>
                </div>
                <!-- END card-->
                <div class="p-3 text-center">
                    <span class="mr-2">&copy;</span>
                    <span>2021</span>
                    <span class="mr-2">-</span>
                    <span>RJG Blog</span>
                    <br>
                    <span>歡迎!</span>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-md-2"></div>
</div>

<script>
    function submitLoginForm(){
        $.post($('form').attr("action"), $("form").serialize(), function(data){
            if(data.statusCode == 401){
                alert("請重新登入");
            } else {
                console.log("登入成功");
                window.location.href = "/";
            }
        })
    }
</script>